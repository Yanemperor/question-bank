(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/question/answer"],{"2c0a":function(t,e,o){"use strict";o.r(e);var i=o("90d5"),s=o("86c1");for(var n in s)"default"!==n&&function(t){o.d(e,t,(function(){return s[t]}))}(n);o("7121");var c,r=o("f0c5"),u=Object(r["a"])(s["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],c);e["default"]=u.exports},"4f4d":function(t,e,o){},7121:function(t,e,o){"use strict";var i=o("4f4d"),s=o.n(i);s.a},"7fee":function(t,e,o){"use strict";(function(t){o("3870"),o("a9ff");i(o("66fd"));var e=i(o("2c0a"));function i(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=o,t(e.default)}).call(this,o("543d")["createPage"])},"86c1":function(t,e,o){"use strict";o.r(e);var i=o("dc3b"),s=o.n(i);for(var n in i)"default"!==n&&function(t){o.d(e,t,(function(){return i[t]}))}(n);e["default"]=s.a},"90d5":function(t,e,o){"use strict";o.d(e,"b",(function(){return s})),o.d(e,"c",(function(){return n})),o.d(e,"a",(function(){return i}));var i={uButton:function(){return Promise.all([o.e("common/vendor"),o.e("uni_modules/uview-ui/components/u-button/u-button")]).then(o.bind(null,"c9bb"))},uPopup:function(){return Promise.all([o.e("common/vendor"),o.e("uni_modules/uview-ui/components/u-popup/u-popup")]).then(o.bind(null,"dfe0"))},uModal:function(){return Promise.all([o.e("common/vendor"),o.e("uni_modules/uview-ui/components/u-modal/u-modal")]).then(o.bind(null,"0059"))},uText:function(){return Promise.all([o.e("common/vendor"),o.e("uni_modules/uview-ui/components/u-text/u-text")]).then(o.bind(null,"b394"))}},s=function(){var t=this,e=t.$createElement,o=(t._self._c,t.__map(t.subjectList,(function(e,o){var i=t.__get_orig(e),s=o-t.subjectIndex>=-1&&o-t.subjectIndex<=1&&(0===e.type||1===e.type||3===e.type||6===e.type||7===e.type)?t.__map(e.options,(function(o,i){var s=t.__get_orig(o),n=e.userAnswer.indexOf(o.key);return{$orig:s,g0:n}})):null,n=o-t.subjectIndex>=-1&&o-t.subjectIndex<=1&&0!==e.type&&1!==e.type&&3!==e.type&&6!==e.type&&7!==e.type&&2===e.type?t.__map(e.options,(function(o,i){var s=t.__get_orig(o),n=e.userAnswer.indexOf(o.key),c=e.userAnswer.indexOf(o.key);return{$orig:s,g1:n,g2:c}})):null;return{$orig:i,l0:s,l1:n}})));t._isMounted||(t.e0=function(e){t.show=!0},t.e1=function(e){t.modalShow=!1},t.e2=function(e){t.submitShow=!1},t.e3=function(e){t.submitShow=!1}),t.$mp.data=Object.assign({},{$root:{l2:o}})},n=[]},dc3b:function(t,e,o){"use strict";(function(t,i){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=o("27c3"),n={data:function(){return{modalShow:!1,submitShow:!1,conclusionShow:!1,show:!1,article:"",isShowArticle:!1,userFavor:!1,currentType:"",subjectIndex:0,autoShowAnswer:!0,autoRadioNext:!0,swiperHeight:"800px",title:"",subjectList:[],modalCard:null,modalError:null,errorList:["题目不完整","答案不正确","含有错别字","图片不存在","解析不完整","其他错误"],correctCount:0,wrongTopics:[],modelTitle:"请登录后再收藏题目吧",isUserWrong:!1}},onReady:function(){var e=800,o=this;t.getSystemInfo({success:function(i){e=i.windowHeight,console.log("屏幕可用高度 "+e),t.createSelectorQuery().select("#top-box").fields({size:!0,scrollOffset:!0},(function(i){e-=i.height,console.log("减掉顶部后的高度 "+e),t.createSelectorQuery().select("#foot-box").fields({size:!0,scrollOffset:!0},(function(t){e-=t.height,console.log("减掉底部后的高度 "+e),o.swiperHeight=e+"px",console.log("滑屏最后高度 "+o.swiperHeight)})).exec()})).exec()}})},onLoad:function(e){if(t.setNavigationBarTitle({title:this.title}),e.isUserWrong&&(this.isUserWrong=!0),e.json){var o=decodeURIComponent(e.json);console.log("options.json:",JSON.stringify(o));var i=JSON.parse(o),s=[];i.map((function(t,e){s.push(Object.assign(t,{showAnswer:!1,userAnswer:""}))})),console.log("detail:",JSON.stringify(s)),this.subjectList=s,this.currentType=this.subjectList[0].typeName,this.userFavor=this.subjectList[0].userFavor,this.isUserWrong=this.subjectList[0].isUserWrong;var n=this.subjectList[0].title;this.subjectList[0].article?(this.article=this.subjectList[0].article,this.isShowArticle=!0):n.length>500?(this.article=n,this.isShowArticle=!0):this.isShowArticle=!1}},methods:{userInfo:function(){return s.store.userInfo},hasLogin:function(){return s.store.hasLogin},showCardModal:function(t){this.modalCard=t.currentTarget.dataset.target},hideCardModal:function(t){this.modalCard=null},showErrorModal:function(e){t.navigateTo({url:"/uni_modules/uni-feedback/pages/opendb-feedback/opendb-feedback"})},hideErrorModal:function(t){this.modalError=null},SwiperChange:function(t){var e=t.target.current;if(void 0!=e){this.subjectIndex=e,this.currentType=this.subjectList[e].typeName,this.userFavor=this.subjectList[e].userFavor,this.isUserWrong=this.subjectList[e].isUserWrong,this.article=this.subjectList[e].article;var o=this.subjectList[e].title;console.log("titleCount",o.length),6===this.subjectList[e].type?(this.article=this.subjectList[e].title,this.isShowArticle=!0):o.length>500?(this.article=o,this.isShowArticle=!0):this.isShowArticle=!1}},RadioboxChange:function(t){this.subjectList[this.subjectIndex].options;var e=t.detail.value;console.log(e),this.subjectList[this.subjectIndex].userAnswer=e,e==this.subjectList[this.subjectIndex].answer?this.autoRadioNext&&this.subjectIndex<this.subjectList.length-1&&(this.subjectIndex+=1):this.ShowAnswerChange()},CheckboxChange:function(t){var e=this.subjectList[this.subjectIndex].options,o=t.detail.value;this.subjectList[this.subjectIndex].userAnswer="";for(var i=0,s=e.length;i<s;++i)for(var n=0,c=o.length;n<c;++n)if(e[i].key==o[n]){this.subjectList[this.subjectIndex].userAnswer+=e[i].key;break}},textInput:function(t){this.subjectList[this.subjectIndex].userAnswer=t.detail.value},ShowAnswerChange:function(t){this.subjectList[this.subjectIndex].showAnswer?this.subjectList[this.subjectIndex].showAnswer=!1:this.subjectList[this.subjectIndex].showAnswer=!0},modalConfirm:function(){console.log("去登录"),t.redirectTo({url:"/uni_modules/uni-id-pages/pages/login/login-withoutpwd"})},FavorSubject:function(t){if(!this.hasLogin())return this.modelTitle="请登录后再收藏题目吧",void(this.modalShow=!0);var e=this.userInfo(),o=this.subjectList[this.subjectIndex];console.log("userInfo:",JSON.stringify(e)),this.userFavor?this.collect(e,o,!1):this.collect(e,o,!0)},collect:function(t,e,o){var s=this,n=i.database();console.log("开始请求topic-collect：",this.paper_id),console.log("topic-collect:",t._id),console.log("topic-collect:",e._id),console.log("topic-collect:",e.paper_type),console.log("topic-collect:",e.type),o?n.collection("topic-collect").add({user_id:t._id,topic_id:e._id,paper_type:e.paper_type,topic_type:e.type}).then((function(t){console.log("获取topic-collect成功",JSON.stringify(t.result.data)),s.userFavor=!0,s.subjectList[s.subjectIndex].userFavor=!0})).catch((function(t){console.log("获取topic-collect失败",t)})):n.collection("topic-collect").where({user_id:t._id,topic_id:e._id}).remove().then((function(t){console.log("获取topic-collect成功",JSON.stringify(t.result.data)),s.userFavor=!1,s.subjectList[s.subjectIndex].userFavor=!1})).catch((function(t){console.log("获取topic-collect失败",t)}))},MoveSubject:function(t){-1===t&&0!=this.subjectIndex&&(this.subjectIndex-=1),1===t&&this.subjectIndex<this.subjectList.length-1&&(this.subjectIndex+=1)},AppointedSubject:function(t){this.modalCard=null,this.subjectIndex=t},SubmitError:function(t){this.modalError=null},open:function(){},close:function(){this.show=!1},submit:function(){this.modalCard=null;for(var t=!0,e=0;e<this.subjectList.length;e++){var o=this.subjectList[e];if(""===o.userAnswer){t=!1;break}}t?this.showConclusion():this.submitShow=!0},submitConfirm:function(){this.submitShow=!1,this.showConclusion()},showConclusion:function(){for(var t=[],e=0;e<this.subjectList.length;e++){var o=this.subjectList[e];console.log("item:",o),o.answer!=o.userAnswer&&(""===o.userAnswer?t.push(o):0!==o.type&&1!==o.type&&3!==o.type&&6!==o.type&&7!==o.type||(o.userAnswer="",o.showAnswer=!1,t.push(o)))}this.wrongTopics=t,this.correctCount=this.subjectList.length-this.wrongTopics.length,this.conclusionShow=!0},wrongTopicNext:function(){this.subjectList=this.wrongTopics,this.subjectIndex=0,this.conclusionShow=!1},saveWrongTopic:function(){if(!this.hasLogin())return this.modelTitle="请登录后再保存错题吧",this.conclusionShow=!1,void(this.modalShow=!0);var t=this.userInfo(),e=[];this.wrongTopics.map((function(o,i){if(0===o.type||1===o.type||3===o.type||6===o.type||7===o.type){var s={user_id:t._id,topic_id:o._id,paper_type:o.paper_type,topic_type:o.type};e.push(s)}})),console.log("temps",e);var o=this;i.callFunction({name:"wrong-topic",data:{user_id:s.store.userInfo._id,wrongTopics:e},success:function(t){console.log("获取wrong-topic成功",JSON.stringify(t.result.data)),o.conclusionShow=!1,o.toBack()},fail:function(t){console.log("获取wrong-topic失败",t)}})},wrongSubject:function(){if(!this.hasLogin())return this.modelTitle="请登录后再添加错题吧",void(this.modalShow=!0);var t=this.userInfo(),e=this.subjectList[this.subjectIndex];console.log("userInfo:",JSON.stringify(t)),this.isUserWrong?this.wrongCollect(t,e,!1):this.wrongCollect(t,e,!0)},wrongCollect:function(t,e,o){var s=this,n=i.database();o?n.collection("wrong-topic").add({user_id:t._id,topic_id:e._id,paper_type:e.paper_type,topic_type:e.type}).then((function(t){console.log("获取wrong-topic成功",JSON.stringify(t.result.data)),s.isUserWrong=!0,s.subjectList[s.subjectIndex].isUserWrong=!0})).catch((function(t){console.log("获取wrong-topic失败",t)})):n.collection("wrong-topic").where({user_id:t._id,topic_id:e._id}).remove().then((function(t){console.log("获取wrong-topic成功",JSON.stringify(t.result.data)),s.isUserWrong=!1,s.subjectList[s.subjectIndex].isUserWrong=!1})).catch((function(t){console.log("获取wrong-topic失败",t)}))},toBack:function(){t.navigateBack()}}};e.default=n}).call(this,o("543d")["default"],o("a9ff")["default"])}},[["7fee","common/runtime","common/vendor"]]]);