(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/question/answer"],{"2c0a":function(t,e,i){"use strict";i.r(e);var s=i("998b"),o=i("86c1");for(var n in o)"default"!==n&&function(t){i.d(e,t,(function(){return o[t]}))}(n);i("7121");var c,u=i("f0c5"),r=Object(u["a"])(o["default"],s["b"],s["c"],!1,null,null,null,!1,s["a"],c);e["default"]=r.exports},"4f4d":function(t,e,i){},7121:function(t,e,i){"use strict";var s=i("4f4d"),o=i.n(s);o.a},"7fee":function(t,e,i){"use strict";(function(t){i("3870"),i("a9ff");s(i("66fd"));var e=s(i("2c0a"));function s(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=i,t(e.default)}).call(this,i("543d")["createPage"])},"86c1":function(t,e,i){"use strict";i.r(e);var s=i("dc3b"),o=i.n(s);for(var n in s)"default"!==n&&function(t){i.d(e,t,(function(){return s[t]}))}(n);e["default"]=o.a},"998b":function(t,e,i){"use strict";i.d(e,"b",(function(){return o})),i.d(e,"c",(function(){return n})),i.d(e,"a",(function(){return s}));var s={uButton:function(){return Promise.all([i.e("common/vendor"),i.e("uni_modules/uview-ui/components/u-button/u-button")]).then(i.bind(null,"c9bb"))},uPopup:function(){return Promise.all([i.e("common/vendor"),i.e("uni_modules/uview-ui/components/u-popup/u-popup")]).then(i.bind(null,"dfe0"))},uModal:function(){return Promise.all([i.e("common/vendor"),i.e("uni_modules/uview-ui/components/u-modal/u-modal")]).then(i.bind(null,"0059"))}},o=function(){var t=this,e=t.$createElement,i=(t._self._c,t.__map(t.subjectList,(function(e,i){var s=t.__get_orig(e),o=i-t.subjectIndex>=-1&&i-t.subjectIndex<=1&&(0===e.type||1===e.type||3===e.type||6===e.type||7===e.type)?t.__map(e.options,(function(i,s){var o=t.__get_orig(i),n=e.userAnswer.indexOf(i.key);return{$orig:o,g0:n}})):null,n=i-t.subjectIndex>=-1&&i-t.subjectIndex<=1&&0!==e.type&&1!==e.type&&3!==e.type&&6!==e.type&&7!==e.type&&2===e.type?t.__map(e.options,(function(i,s){var o=t.__get_orig(i),n=e.userAnswer.indexOf(i.key),c=e.userAnswer.indexOf(i.key);return{$orig:o,g1:n,g2:c}})):null;return{$orig:s,l0:o,l1:n}})));t._isMounted||(t.e0=function(e){t.show=!0},t.e1=function(e){t.modalShow=!1}),t.$mp.data=Object.assign({},{$root:{l2:i}})},n=[]},dc3b:function(t,e,i){"use strict";(function(t,s){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i("27c3"),n={data:function(){return{modalShow:!1,show:!1,article:"",isShowArticle:!1,userFavor:!1,currentType:"",subjectIndex:0,autoShowAnswer:!0,autoRadioNext:!0,swiperHeight:"800px",title:"",subjectList:[],modalCard:null,modalError:null,errorList:["题目不完整","答案不正确","含有错别字","图片不存在","解析不完整","其他错误"]}},onReady:function(){var e=800,i=this;t.getSystemInfo({success:function(s){e=s.windowHeight,console.log("屏幕可用高度 "+e),t.createSelectorQuery().select("#top-box").fields({size:!0,scrollOffset:!0},(function(s){e-=s.height,console.log("减掉顶部后的高度 "+e),t.createSelectorQuery().select("#foot-box").fields({size:!0,scrollOffset:!0},(function(t){e-=t.height,console.log("减掉底部后的高度 "+e),i.swiperHeight=e+"px",console.log("滑屏最后高度 "+i.swiperHeight)})).exec()})).exec()}})},onLoad:function(e){if(t.setNavigationBarTitle({title:this.title}),e.json){var i=decodeURIComponent(e.json);console.log("options.json:",JSON.stringify(i));var s=JSON.parse(i),o=[];s.map((function(t,e){o.push(Object.assign(t,{showAnswer:!1,userAnswer:""}))})),console.log("detail:",JSON.stringify(o)),this.subjectList=o,this.currentType=this.subjectList[0].typeName,this.userFavor=this.subjectList[0].userFavor;var n=this.subjectList[0].title;this.subjectList[0].article?(this.article=this.subjectList[0].article,this.isShowArticle=!0):n.length>500?(this.article=n,this.isShowArticle=!0):this.isShowArticle=!1}},methods:{userInfo:function(){return o.store.userInfo},hasLogin:function(){return o.store.hasLogin},showCardModal:function(t){this.modalCard=t.currentTarget.dataset.target},hideCardModal:function(t){this.modalCard=null},showErrorModal:function(e){t.navigateTo({url:"/uni_modules/uni-feedback/pages/opendb-feedback/opendb-feedback"})},hideErrorModal:function(t){this.modalError=null},SwiperChange:function(t){var e=t.target.current;if(void 0!=e){this.subjectIndex=e,this.currentType=this.subjectList[e].typeName,this.userFavor=this.subjectList[e].userFavor,this.article=this.subjectList[e].article;var i=this.subjectList[e].title;console.log("titleCount",i.length),6===this.subjectList[e].type?(this.article=this.subjectList[e].title,this.isShowArticle=!0):i.length>500?(this.article=i,this.isShowArticle=!0):this.isShowArticle=!1}},RadioboxChange:function(t){this.subjectList[this.subjectIndex].options;var e=t.detail.value;console.log(e),this.subjectList[this.subjectIndex].userAnswer=e,e==this.subjectList[this.subjectIndex].answer?this.autoRadioNext&&this.subjectIndex<this.subjectList.length-1&&(this.subjectIndex+=1):this.ShowAnswerChange()},CheckboxChange:function(t){var e=this.subjectList[this.subjectIndex].options,i=t.detail.value;this.subjectList[this.subjectIndex].userAnswer="";for(var s=0,o=e.length;s<o;++s)for(var n=0,c=i.length;n<c;++n)if(e[s].key==i[n]){this.subjectList[this.subjectIndex].userAnswer+=e[s].key;break}},textInput:function(t){this.subjectList[this.subjectIndex].userAnswer=t.detail.value},ShowAnswerChange:function(t){this.subjectList[this.subjectIndex].showAnswer?this.subjectList[this.subjectIndex].showAnswer=!1:this.subjectList[this.subjectIndex].showAnswer=!0},modalConfirm:function(){console.log("去登录"),t.redirectTo({url:"/uni_modules/uni-id-pages/pages/login/login-withoutpwd"})},FavorSubject:function(t){if(this.hasLogin()){var e=this.userInfo(),i=this.subjectList[this.subjectIndex];console.log("userInfo:",JSON.stringify(e)),this.userFavor?this.collect(e,i,!1):this.collect(e,i,!0)}else this.modalShow=!0},collect:function(t,e,i){var o=this,n=s.database();console.log("开始请求topic-collect：",this.paper_id),console.log("topic-collect:",t._id),console.log("topic-collect:",e._id),console.log("topic-collect:",e.paper_type),console.log("topic-collect:",e.type),i?n.collection("topic-collect").add({user_id:t._id,topic_id:e._id,paper_type:e.paper_type,topic_type:e.type}).then((function(t){console.log("获取topic-collect成功",JSON.stringify(t.result.data)),o.userFavor=!0,o.subjectList[o.subjectIndex].userFavor=!0})).catch((function(t){console.log("获取topic-collect失败",t)})):n.collection("topic-collect").where({user_id:t._id,topic_id:e._id}).remove().then((function(t){console.log("获取topic-collect成功",JSON.stringify(t.result.data)),o.userFavor=!1,o.subjectList[o.subjectIndex].userFavor=!1})).catch((function(t){console.log("获取topic-collect失败",t)}))},MoveSubject:function(t){-1===t&&0!=this.subjectIndex&&(this.subjectIndex-=1),1===t&&this.subjectIndex<this.subjectList.length-1&&(this.subjectIndex+=1)},AppointedSubject:function(t){this.modalCard=null,this.subjectIndex=t},SubmitError:function(t){this.modalError=null},open:function(){},close:function(){this.show=!1}}};e.default=n}).call(this,i("543d")["default"],i("a9ff")["default"])}},[["7fee","common/runtime","common/vendor"]]]);